<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Image Generator — Google AI Studio</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; text-align: center; }
    #inputArea { display: none; margin-top: 20px; }
    #result img { margin-top: 20px; max-width: 512px; border-radius: 8px; }
  </style>
</head>
<body>

  <button onclick="showInput()">First Button</button>
  <button onclick="showInput()">Second Button — Generate Image</button>

  <div id="inputArea">
    <input type="text" id="prompt" placeholder="Type your prompt..." size="50">
    <button onclick="generateImage()">Generate</button>
  </div>

  <div id="result"></div>

  <script>
    function showInput() {
      document.getElementById('inputArea').style.display = 'block';
    }

    async function generateImage() {
      const prompt = document.getElementById('prompt').value;
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = 'Generating image... Please wait.';

      try {
        const response = await fetch('https://YOUR_VERTEX_AI_ENDPOINT/v1/images:generate', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            // Use proper authentication: OAuth token or API key
            'Authorization': 'Bearer YOUR_OAUTH_TOKEN_OR_API_KEY'
          },
          body: JSON.stringify({
            prompt: prompt,
            model: "imagen-3" // or "gemini-2.5-flash-image-preview"
          })
        });

        const data = await response.json();
        const imageUrl = data.imageUri; // variable depends on API spec

        resultDiv.innerHTML = `<img src="${imageUrl}" alt="Generated Image">`;
      } catch (err) {
        console.error(err);
        resultDiv.innerHTML = 'Error generating image.';
      }
    }
  </script>
</body>
</html>
